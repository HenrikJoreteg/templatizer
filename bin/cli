#!/usr/bin/env node

var path = require('path');
var parseArgs = require('minimist');
var templatizer = require('../templatizer');

var argv = parseArgs(process.argv.slice(2), {
    alias: {
        d: 'directory',
        o: 'outfile'
    }
});

var usage = [
    '  ',
    '  Templatizer: convert directory of jade templates, to a precompile file of template functions',
    '  ',
    '    Usage examples:',
    '  ',
    '      templatizer -d /path/to/templates -o templates.js',
    '       # compile directory of templates to templates.js',
    '  ',
    '      templatizer --directory /path/to/templates -o templates.js',
    '       # as above with longer form of options',
].join('\n');


var directory = argv.d;
var output = argv.o;

if (!directory || !output) {
    console.log(usage);
    process.exit(1);
}

templatizer(
    path.join(process.cwd(), directory),
    path.join(process.cwd(), output)
);
